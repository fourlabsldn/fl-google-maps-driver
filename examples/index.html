<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>fl-google-maps-driver</title>
  <!-- RequireJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>
  <script type="text/javascript">
  	requirejs.config({
  		baseUrl: '/js',
  		paths: {
        'lodash/fp': 'https://cdnjs.cloudflare.com/ajax/libs/lodash-fp/0.10.4/lodash-fp.min',
        'fl-google-maps-driver': '/dest/index',
  		},
  	});
  </script>

  <style>
    body{
      display: flex;
      width: 100vw;
      height: 100vh;
      background-color: f0f0f0;
    }

    #map {
      width: 500px;
      height: 500px;
      margin: auto;
      box-shadow: 0 0 20px #999;
    }
  </style>
</head>
<body>

  <div id="map"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKdTnpxORlxfcVsuASHCeozz1CCMLM0u4"></script>
<script>
  require(['fl-google-maps-driver'], function (MapDriver) {

    mapDriver = new MapDriver(google, '#map', { center: { lat: 51.473663, lng: -0.203287 }});

    // Crate markers with latitude and longitude
    const marker1 = mapDriver.createMarker({
      lat: 51.473663,
      lng: -0.203287 ,
      icon: 'http://www.philippetersen.co.uk/images/car-icon.png?1400146158'
    })

    // Move marker
    setTimeout(() => {
      mapDriver.moveMarker(marker1, { lat: 51.579663, lng: -0.613287 })
    }, 1000)

    // get locations for addresses
    Promise.all([
      mapDriver.toLatLng('21 Heathmans Road, London, Uk'),
      mapDriver.toLatLng('SW1A 1AA, London'),
    ])
    .then(coords => {
      console.log(coords)
      // Create markers with postcode
      const marker2 = mapDriver.createMarker({
        lat: coords[0].lat,
        lng: coords[0].lng,
        icon: 'http://cre8mania.com/sites/all/themes/cre/images/icons/bike.gif',
        // // Info window receives a function to be called
        // // when marker is clicked. Should return an HTMLElement.
        // infoWindow: () => document.createElement('div'),
      });

      setTimeout(
        () =>mapDriver.moveMarker(marker2, coords[1]),
        1000
      )
    });

    // Ability to get all markers
    setTimeout(() => {
      const allMarkers = mapDriver.getMarkers();
      console.log(allMarkers)
      mapDriver.focusMarkers(allMarkers)
    }, 5000);

    mapDriver.destroyMarker(marker1);
  })
</script>
