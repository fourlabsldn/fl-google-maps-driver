<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>fl-google-maps-driver</title>
  <!-- RequireJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>
  <script type="text/javascript">
  	requirejs.config({
  		baseUrl: '/js',
  		paths: {
        'lodash/fp': 'https://cdnjs.cloudflare.com/ajax/libs/lodash-fp/0.10.4/lodash-fp.min',
        'fl-google-maps-driver': '../dest/index',
  		},
  	});
  </script>

  <link rel="stylesheet" href="style.css">
  <style>
    body{
      display: flex;
      flex-flow: column nowrap;
      width: 100vw;
      height: 100vh;
      background-color: f0f0f0;
    }

    #map {
      width: 500px;
      height: 500px;
      margin: 0 auto;
      box-shadow: 0 0 20px #999;
    }
  </style>
</head>
<body>
  <h1><a href="https://github.com/lazamar/fl-google-maps-driver">fl-google-maps-driver</a></h1>
  <div id="map"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKdTnpxORlxfcVsuASHCeozz1CCMLM0u4"></script>
<script>
  //
  //
  //
  //
  //    MAP CODE
  //
  //
  //
  //
  //
  //
  require(['fl-google-maps-driver'], function (MapDriver) {

    mapDriver = new MapDriver(google, '#map', { center: { lat: 51.473663, lng: -0.203287 }});

    // Crate markers with latitude and longitude
    const marker1 = mapDriver.createMarker({
      lat: 51.473663,
      lng: -0.203287 ,
      icon: 'http://macaulay.cuny.edu/eportfolios/borders/files/leaflet-maps-marker-icons/sportutilityvehicle.png',
      infoWindow: () => `<p> The time now is ${new Date().toString().slice(16, 24)}</p>`
    })

    // Move marker
    setTimeout(() => {
      mapDriver.moveMarker(marker1, { lat: 51.579663, lng: -0.613287 })
    }, 1000)

    // get locations for addresses
    Promise.all([
      mapDriver.toLatLng('21 Heathmans Road, London, Uk'),
      mapDriver.toLatLng('SW1A 1AA, London'),
    ])
    .then(coords => {
      marker2 = mapDriver.createMarker({
        lat: coords[0].lat,
        lng: coords[0].lng,
        icon: 'http://orig12.deviantart.net/71e1/f/2015/330/9/c/marty_walk_cycle_by_logofanatic-d9i5oy1.gif',
        optimized: false,        // Info window receives a function to be called
        // when marker is clicked. Should return an HTMLElement.
        infoWindow: '<h1>Oh yeah!</h1>',
      });

      setTimeout(
        () =>mapDriver.moveMarker(marker2, coords[1]),
        1000
      )
    });

    // Ability to get all markers
    setTimeout(() => {
      const allMarkers = mapDriver.getMarkers();
      mapDriver.focusMarkers(allMarkers)
    }, 2000);


    setTimeout(() => {
      mapDriver.destroyMarker(marker2);
    }, 3000);

  })
</script>
