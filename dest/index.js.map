{"version":3,"file":"index.js","sources":["node_modules/fl-assert/dist/assert.js","src/index.js"],"sourcesContent":["// Bug checking function that will throw an error whenever\n// the condition sent to it is evaluated to false\n/**\n * Processes the message and outputs the correct message if the condition\n * is false. Otherwise it outputs null.\n * @api private\n * @method processCondition\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return {String | null}  - Error message if there is an error, nul otherwise.\n */\nfunction processCondition(condition, errorMessage) {\n  if (!condition) {\n    var completeErrorMessage = '';\n    var re = /at ([^\\s]+)\\s\\(/g;\n    var stackTrace = new Error().stack;\n    var stackFunctions = [];\n\n    var funcName = re.exec(stackTrace);\n    while (funcName && funcName[1]) {\n      stackFunctions.push(funcName[1]);\n      funcName = re.exec(stackTrace);\n    }\n\n    // Number 0 is processCondition itself,\n    // Number 1 is assert,\n    // Number 2 is the caller function.\n    if (stackFunctions[2]) {\n      completeErrorMessage = stackFunctions[2] + ': ' + completeErrorMessage;\n    }\n\n    completeErrorMessage += errorMessage;\n    return completeErrorMessage;\n  }\n\n  return null;\n}\n\n/**\n * Throws an error if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert(myDate !== undefined, \"Date cannot be undefined.\");\n * @api public\n * @method assert\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nfunction assert(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    throw new Error(error);\n  }\n}\n\n/**\n * Logs a warning if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert.warn(myDate !== undefined, \"No date provided.\");\n * @api public\n * @method warn\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nassert.warn = function warn(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    console.warn(error);\n  }\n};\n\nexport default assert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnVnIGNoZWNraW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuZXZlclxuLy8gdGhlIGNvbmRpdGlvbiBzZW50IHRvIGl0IGlzIGV2YWx1YXRlZCB0byBmYWxzZVxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIG1lc3NhZ2UgYW5kIG91dHB1dHMgdGhlIGNvcnJlY3QgbWVzc2FnZSBpZiB0aGUgY29uZGl0aW9uXG4gKiBpcyBmYWxzZS4gT3RoZXJ3aXNlIGl0IG91dHB1dHMgbnVsbC5cbiAqIEBhcGkgcHJpdmF0ZVxuICogQG1ldGhvZCBwcm9jZXNzQ29uZGl0aW9uXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBudWxsfSAgLSBFcnJvciBtZXNzYWdlIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBudWwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3JNZXNzYWdlID0gJyc7XG4gICAgY29uc3QgcmUgPSAvYXQgKFteXFxzXSspXFxzXFwoL2c7XG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIGNvbnN0IHN0YWNrRnVuY3Rpb25zID0gW107XG5cbiAgICBsZXQgZnVuY05hbWUgPSByZS5leGVjKHN0YWNrVHJhY2UpO1xuICAgIHdoaWxlIChmdW5jTmFtZSAmJiBmdW5jTmFtZVsxXSkge1xuICAgICAgc3RhY2tGdW5jdGlvbnMucHVzaChmdW5jTmFtZVsxXSk7XG4gICAgICBmdW5jTmFtZSA9IHJlLmV4ZWMoc3RhY2tUcmFjZSk7XG4gICAgfVxuXG4gICAgLy8gTnVtYmVyIDAgaXMgcHJvY2Vzc0NvbmRpdGlvbiBpdHNlbGYsXG4gICAgLy8gTnVtYmVyIDEgaXMgYXNzZXJ0LFxuICAgIC8vIE51bWJlciAyIGlzIHRoZSBjYWxsZXIgZnVuY3Rpb24uXG4gICAgaWYgKHN0YWNrRnVuY3Rpb25zWzJdKSB7XG4gICAgICBjb21wbGV0ZUVycm9yTWVzc2FnZSA9IGAke3N0YWNrRnVuY3Rpb25zWzJdfTogJHtjb21wbGV0ZUVycm9yTWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICByZXR1cm4gY29tcGxldGVFcnJvck1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGJvb2xlYW4gcGFzc2VkIHRvIGl0IGV2YWx1YXRlcyB0byBmYWxzZS5cbiAqIFRvIGJlIHVzZWQgbGlrZSB0aGlzOlxuICogXHRcdGFzc2VydChteURhdGUgIT09IHVuZGVmaW5lZCwgXCJEYXRlIGNhbm5vdCBiZSB1bmRlZmluZWQuXCIpO1xuICogQGFwaSBwdWJsaWNcbiAqIEBtZXRob2QgYXNzZXJ0XG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gcHJvY2Vzc0NvbmRpdGlvbihjb25kaXRpb24sIGVycm9yTWVzc2FnZSk7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBib29sZWFuIHBhc3NlZCB0byBpdCBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gKiBUbyBiZSB1c2VkIGxpa2UgdGhpczpcbiAqIFx0XHRhc3NlcnQud2FybihteURhdGUgIT09IHVuZGVmaW5lZCwgXCJObyBkYXRlIHByb3ZpZGVkLlwiKTtcbiAqIEBhcGkgcHVibGljXG4gKiBAbWV0aG9kIHdhcm5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbmRpdGlvbiAtIFJlc3VsdCBvZiB0aGUgZXZhbHVhdGVkIGNvbmRpdGlvblxuICogQHBhcmFtICB7U3RyaW5nfSBlcnJvck1lc3NhZ2UgLSBNZXNzYWdlIGV4cGxhaW5pZyB0aGUgZXJyb3IgaW4gY2FzZSBpdCBpcyB0aHJvd25cbiAqIEByZXR1cm4gdm9pZFxuICovXG5hc3NlcnQud2FybiA9IGZ1bmN0aW9uIHdhcm4oY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3NlcnQ7XG4iXSwiZmlsZSI6ImFzc2VydC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","/* globals google */\nimport assert from 'fl-assert';\n\nconst DEFAULTS = {\n  apiKey: 'AIzaSyACR9XwTnLLG11mr2ncrIgR7vwAlAzBK08',\n  mapOptions: {\n    center: { lat: 51.473663, lng: -0.203287 },\n    mapTypeId: google.maps.MapTypeId.ROADMAP,\n    zoom: 14,\n    scrollwheel: false,\n    maxZoom: 17,\n  },\n};\n\nfunction withoutIndex(array, index) {\n  return array.slice(0, index).concat(array.slice(index + 1, array.length));\n}\n\n/**\n * @function createMap\n * @param {HTMLElement} mapContainer\n * @param {Object} options\n * @return map\n */\nfunction createMap(mapContainer, options = {}) {\n  const mapOptions = Object.assign({}, DEFAULTS.mapOptions, options);\n  const map = new google.maps.Map(mapContainer, mapOptions);\n  return map;\n}\n\nfunction createPosition(lat, lng) {\n  return new google.maps.LatLng(lat, lng);\n}\n\nfunction createMarker(map, config) {\n  assert(config, 'No marker configuration provided');\n  assert(config.position, 'No marker position provided');\n  const position = createPosition(config.lat, config.lng);\n  const markerConfig = Object.assign({}, config, { position, map });\n  const marker = new google.maps.Marker(markerConfig);\n  return marker;\n}\n\nexport default class MapDriver {\n  constructor(mapContainerSelector, options) {\n    assert(window.google, 'Google Maps not loaded.');\n    const mapContainer = document.querySelector(mapContainerSelector);\n    const containerIsValid = mapContainer && mapContainer.nodeName;\n    assert(containerIsValid, `Invalid map container from selector: ${mapContainerSelector}`);\n\n    this.map = createMap(mapContainer, options);\n    this.markers = [];\n    Object.preventExtensions(this);\n  }\n\n  /**\n   * @private\n   */\n  addMarker(marker) {\n    this.markers = this.markers.concat([marker]);\n    return this;\n  }\n\n  /**\n   * @public\n   */\n  getMarkers() {\n    return Array.from(this.markers);\n  }\n\n  /**\n   * @public\n   */\n  async createMarker(config) {\n    const marker = createMarker(this.map, config);\n    this.addMarker(marker);\n    return marker;\n  }\n\n  moveMarker(marker, destination) {\n    const position = createPosition(destination);\n    marker.setPosition(position);\n    return this;\n  }\n\n  destroyMarker(marker) {\n    const mIndex = this.markers.indexOf(marker);\n    assert(mIndex !== -1, 'Attempting to destroy a marker that is not in the map.');\n    this.markers = withoutIndex(this.markers, mIndex);\n    marker.setMap(null);\n    return this;\n  }\n}\n"],"names":["DEFAULTS","lat","lng","google","maps","MapTypeId","ROADMAP","withoutIndex","array","index","slice","concat","length","createMap","mapContainer","options","mapOptions","Object","assign","map","Map","createPosition","LatLng","createMarker","config","position","markerConfig","marker","Marker","MapDriver","mapContainerSelector","window","document","querySelector","containerIsValid","nodeName","markers","preventExtensions","Array","from","addMarker","destination","setPosition","mIndex","indexOf","setMap"],"mappings":"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","sourceRoot":"/source/"}